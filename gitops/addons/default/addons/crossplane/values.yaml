# Crossplane Core HA Configuration
replicas: 2

resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    memory: 512Mi

nodeSelector:
  karpenter.sh/nodepool: system-peeks

tolerations:
- key: "CriticalAddonsOnly"
  operator: "Exists"
  effect: "NoSchedule"

topologySpreadConstraints:
- maxSkew: 1
  topologyKey: topology.kubernetes.io/zone
  whenUnsatisfiable: DoNotSchedule
  labelSelector:
    matchLabels:
      app: crossplane

podDisruptionBudget:
  enabled: true
  maxUnavailable: 1

# RBAC Manager HA
rbacManager:
  replicas: 2
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      memory: 256Mi
  nodeSelector:
    karpenter.sh/nodepool: system-peeks
  tolerations:
  - key: "CriticalAddonsOnly"
    operator: "Exists"
    effect: "NoSchedule"
  topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: DoNotSchedule
    labelSelector:
      matchLabels:
        app: crossplane-rbac-manager
  podDisruptionBudget:
    enabled: true
    maxUnavailable: 1
