podSecurityStandard: restricted
validationFailureAction: Audit
skipBackgroundRequests: true
background: true

# Custom setting to enable allowExistingViolations
allowExistingViolations: true

# Exclude critical system namespaces from policy validation
excludeNamespaces:
  - kube-system
  - kube-public
  - kube-node-lease
  - kyverno
  - argocd
  - crossplane-system
  - argo-events
  - cert-manager
  - external-secrets
  - ingress-nginx

# Kyverno Helm values to fix kubectl image issue
# Override the cleanup jobs kubectl image to use a working version

# Fix for policy reports cleanup job (kyverno-clean-reports)
policyReportsCleanup:
  image:
    registry: registry.k8s.io
    repository: kubectl
    tag: "v1.30.2"
    pullPolicy: IfNotPresent

# Fix for webhooks cleanup job
webhooksCleanup:
  image:
    registry: registry.k8s.io
    repository: kubectl
    tag: "v1.30.2"
    pullPolicy: IfNotPresent
